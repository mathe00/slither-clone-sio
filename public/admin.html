<!-- --- public/admin.html --- -->
<!DOCTYPE html>
<html lang="en"> <!-- Default lang attribute -->
  <head>
    <meta charset="UTF-8" />
    <!-- Title will be set by i18next -->
    <title data-i18n="pageTitle">Admin - Slither Clone</title>
    <!-- Link to the external CSS file -->
    <link rel="stylesheet" href="style-admin.css" />
    <!-- Add Favicon -->
    <link rel="icon" href="slither-logo.png" type="image/x-icon" />
    <!-- i18next libraries from CDN -->
    <script src="https://unpkg.com/i18next/i18next.min.js"></script>
    <script src="https://unpkg.com/i18next-http-backend/i18nextHttpBackend.min.js"></script>
    <script src="https://unpkg.com/i18next-browser-languagedetector/i18nextBrowserLanguageDetector.min.js"></script>
  </head>
  <body>
    <div class="admin-container">
      <!-- Back Button -->
      <a href="/" class="back-link-button" data-i18n="[title]backButtonTitle" title="Back to main page"
        >‚Üê</a
      >

      <!-- Tab Navigation -->
      <div class="admin-tabs">
        <button class="admin-tab-button active" data-tab="settings" data-i18n="tabs.settings">
          General Settings
        </button>
        <button class="admin-tab-button" data-tab="users" data-i18n="tabs.users">
          User Management
        </button>
        <button class="admin-tab-button" data-tab="current-config" data-i18n="tabs.currentConfig">
          Current Configuration
        </button>
      </div>

      <!-- Settings Tab Content -->
      <div id="tab-settings" class="admin-tab-content active">
        <h3 data-i18n="settingsForm.title">General Settings</h3>
        <div class="password-info" data-i18n="[html]settingsForm.passwordNote">
          <!-- Content replaced by i18next -->
        </div>

        <form id="adminForm">
          <div class="form-grid">
            <!-- --- Map Settings --- -->
            <div class="form-group">
              <label for="mapWidth" data-i18n="settingsForm.mapWidth.label">Map Width (px) *:</label>
              <input
                type="number"
                id="mapWidth"
                name="mapWidth"
                data-i18n="[placeholder]settingsForm.mapWidth.placeholder"
                placeholder="e.g. 4000"
              />
            </div>
            <div class="form-group">
              <label for="mapHeight" data-i18n="settingsForm.mapHeight.label">Map Height (px) *:</label>
              <input
                type="number"
                id="mapHeight"
                name="mapHeight"
                data-i18n="[placeholder]settingsForm.mapHeight.placeholder"
                placeholder="e.g. 4000"
              />
            </div>
            <div class="form-group">
              <label for="mapShape" data-i18n="settingsForm.mapShape.label">Map Shape *:</label>
              <select id="mapShape" name="mapShape">
                  <option value="rectangle" data-i18n="settingsForm.mapShape.rectangle">Rectangle</option>
                  <option value="circle" data-i18n="settingsForm.mapShape.circle">Circle</option>
              </select>
            </div>
             <div class="form-group">
              <label for="aoiRadius" data-i18n="settingsForm.aoiRadius.label">Area of Interest (AoI) Radius (px) *:</label>
              <input
                type="number"
                id="aoiRadius"
                name="aoiRadius"
                data-i18n="[placeholder]settingsForm.aoiRadius.placeholder"
                placeholder="e.g. 2000"
              />
            </div>
            <!-- --- Gameplay Settings --- -->
            <div class="form-group">
              <label for="maxTrailLengthDefault" data-i18n="settingsForm.maxTrailLengthDefault.label"
                >Snake Size Limit (Default):</label
              >
              <input
                type="number"
                id="maxTrailLengthDefault"
                name="maxTrailLengthDefault"
                data-i18n="[placeholder]settingsForm.maxTrailLengthDefault.placeholder"
                placeholder="e.g. 1000"
              />
            </div>
            <div class="form-group">
              <label for="initialSize" data-i18n="settingsForm.initialSize.label">Initial Snake Size:</label>
              <input
                type="number"
                id="initialSize"
                name="initialSize"
                data-i18n="[placeholder]settingsForm.initialSize.placeholder"
                placeholder="e.g. 50"
              />
            </div>
            <div class="form-group">
              <label for="speed" data-i18n="settingsForm.speed.label">Base Speed:</label>
              <input
                type="number"
                step="0.1"
                id="speed"
                name="speed"
                data-i18n="[placeholder]settingsForm.speed.placeholder"
                placeholder="e.g. 1"
              />
            </div>
            <div class="form-group">
              <label for="maxRotationRate" data-i18n="settingsForm.maxRotationRate.label"
                >Max Rotation Rate (rad/tick):</label
              >
              <input
                type="number"
                step="0.01"
                id="maxRotationRate"
                name="maxRotationRate"
                data-i18n="[placeholder]settingsForm.maxRotationRate.placeholder"
                placeholder="e.g. 0.08"
              />
            </div>
            <div class="form-group">
              <label for="minBoostSize" data-i18n="settingsForm.minBoostSize.label">Min. Size for Boost:</label>
              <input
                type="number"
                id="minBoostSize"
                name="minBoostSize"
                data-i18n="[placeholder]settingsForm.minBoostSize.placeholder"
                placeholder="e.g. 50"
              />
            </div>
            <div class="form-group">
              <label for="boostConsumptionRate" data-i18n="settingsForm.boostConsumptionRate.label"
                >Boost Consumption Rate:</label
              >
              <input
                type="number"
                id="boostConsumptionRate"
                name="boostConsumptionRate"
                data-i18n="[placeholder]settingsForm.boostConsumptionRate.placeholder"
                placeholder="e.g. 1"
              />
            </div>
            <div class="form-group">
              <label for="foodSpawnInterval" data-i18n="settingsForm.foodSpawnInterval.label"
                >Food Spawn Interval (ms):</label
              >
              <input
                type="number"
                id="foodSpawnInterval"
                name="foodSpawnInterval"
                data-i18n="[placeholder]settingsForm.foodSpawnInterval.placeholder"
                placeholder="e.g. 5000"
              />
            </div>
            <div class="form-group">
              <label for="fps" data-i18n="settingsForm.fps.label">Server FPS (loops/sec):</label>
              <input
                type="number"
                id="fps"
                name="fps"
                data-i18n="[placeholder]settingsForm.fps.placeholder"
                placeholder="e.g. 45"
              />
            </div>
            <div class="form-group">
              <label for="foodAttractionStrength" data-i18n="settingsForm.foodAttractionStrength.label"
                >Food Attraction Strength:</label
              >
              <input
                type="number"
                step="0.01"
                id="foodAttractionStrength"
                name="foodAttractionStrength"
                data-i18n="[placeholder]settingsForm.foodAttractionStrength.placeholder"
                placeholder="e.g. 0.1"
              />
            </div>
            <div class="form-group">
              <label for="foodSnapDistance" data-i18n="settingsForm.foodSnapDistance.label">Food Snap Distance:</label>
              <input
                type="number"
                id="foodSnapDistance"
                name="foodSnapDistance"
                data-i18n="[placeholder]settingsForm.foodSnapDistance.placeholder"
                placeholder="e.g. 5"
              />
            </div>
            <div class="form-group">
              <label for="defaultZoomLevel" data-i18n="settingsForm.defaultZoomLevel.label">Default Zoom Level:</label>
              <input
                type="number"
                step="0.1"
                id="defaultZoomLevel"
                name="defaultZoomLevel"
                data-i18n="[placeholder]settingsForm.defaultZoomLevel.placeholder"
                placeholder="e.g. 1.0"
              />
            </div>
            <!-- --- Security & Anti-Cheat --- -->
             <div class="form-group">
              <label for="securityMode" data-i18n="settingsForm.securityMode.label">Security Mode *:</label>
              <select id="securityMode" name="securityMode">
                  <option value="high" data-i18n="settingsForm.securityMode.high">High (Recommended)</option>
                  <option value="low" data-i18n="settingsForm.securityMode.low">Low (Client + Light)</option>
              </select>
            </div>
            <div class="form-group">
              <label for="teleportViolationThreshold" data-i18n="settingsForm.teleportViolationThreshold.label"
                >Teleport Violation Threshold:</label
              >
              <input
                type="number"
                id="teleportViolationThreshold"
                name="teleportViolationThreshold"
                data-i18n="[placeholder]settingsForm.teleportViolationThreshold.placeholder"
                placeholder="e.g. 5"
              />
            </div>
            <div class="form-group">
              <label for="teleportToleranceFactor" data-i18n="settingsForm.teleportToleranceFactor.label"
                >Teleport Tolerance Factor:</label
              >
              <input
                type="number"
                step="0.1"
                id="teleportToleranceFactor"
                name="teleportToleranceFactor"
                data-i18n="[placeholder]settingsForm.teleportToleranceFactor.placeholder"
                placeholder="e.g. 1.5"
              />
            </div>
         <!-- --- God Mode Setting --- -->
         <div class="form-group">
           <label for="godmodeOnSpawnEnabled" data-i18n="settingsForm.godmodeOnSpawnEnabled.label">Enable God Mode on Spawn:</label>
           <select id="godmodeOnSpawnEnabled" name="godmodeOnSpawnEnabled">
               <option value="true" data-i18n="settingsForm.godmodeOnSpawnEnabled.yes">Yes</option>
               <option value="false" data-i18n="settingsForm.godmodeOnSpawnEnabled.no">No</option>
           </select>
         </div>
            <!-- --- Bot Settings --- -->
            <div class="form-group">
              <label for="botsEnabled" data-i18n="settingsForm.botsEnabled.label">Enable Bots:</label>
              <select id="botsEnabled" name="botsEnabled">
                  <option value="true" data-i18n="settingsForm.botsEnabled.yes">Yes</option>
                  <option value="false" data-i18n="settingsForm.botsEnabled.no">No</option>
              </select>
            </div>
            <div class="form-group">
              <label for="botMaxCount" data-i18n="settingsForm.botMaxCount.label">Max Bot Count:</label>
              <input
                type="number"
                id="botMaxCount"
                name="botMaxCount"
                data-i18n="[placeholder]settingsForm.botMaxCount.placeholder"
                placeholder="e.g. 10"
              />
            </div>
            <div class="form-group">
              <label for="botSpawnIntervalMs" data-i18n="settingsForm.botSpawnIntervalMs.label">Bot Spawn Interval (ms):</label>
              <input
                type="number"
                id="botSpawnIntervalMs"
                name="botSpawnIntervalMs"
                data-i18n="[placeholder]settingsForm.botSpawnIntervalMs.placeholder"
                placeholder="e.g. 5000"
              />
            </div>
            <div class="form-group">
              <label for="botExpirationTimeMs" data-i18n="settingsForm.botExpirationTimeMs.label">Bot Lifetime (ms):</label>
              <input
                type="number"
                id="botExpirationTimeMs"
                name="botExpirationTimeMs"
                data-i18n="[placeholder]settingsForm.botExpirationTimeMs.placeholder"
                placeholder="e.g. 120000"
              />
            </div>
             <div class="form-group">
              <label for="botDifficulty" data-i18n="settingsForm.botDifficulty.label">Bot Difficulty:</label>
              <select id="botDifficulty" name="botDifficulty">
                  <option value="easy" data-i18n="settingsForm.botDifficulty.easy">Easy</option>
                  <option value="medium" data-i18n="settingsForm.botDifficulty.medium">Medium</option>
                  <option value="hard" data-i18n="settingsForm.botDifficulty.hard">Hard</option>
              </select>
            </div>
            <!-- --- Admin Message --- -->
            <div class="form-group" style="grid-column: 1 / -1">
              <label for="adminMessageText" data-i18n="settingsForm.adminMessageText.label"
                >Admin Message (leave empty to clear):</label
              >
              <input
                type="text"
                id="adminMessageText"
                name="adminMessageText"
                data-i18n="[placeholder]settingsForm.adminMessageText.placeholder"
                placeholder="Message to display to all players"
              />
            </div>
            <div class="form-group">
              <label for="adminMessageDuration" data-i18n="settingsForm.adminMessageDuration.label"
                >Message Duration (seconds):</label
              >
              <input
                type="number"
                id="adminMessageDuration"
                name="adminMessageDuration"
                data-i18n="[placeholder]settingsForm.adminMessageDuration.placeholder"
                placeholder="e.g. 10"
              />
            </div>
          </div>

          <div id="feedbackMessage"></div>
          <!-- Feedback area -->

          <div class="admin-actions">
            <button type="submit" data-i18n="settingsForm.updateButton">Update Settings</button>
          </div>
        </form>
      </div>

      <!-- User Management Tab Content -->
      <div id="tab-users" class="admin-tab-content">
        <h3 data-i18n="userManagement.title">User Management</h3>
        <div id="userFeedback" style="margin-bottom: 15px"></div>
        <!-- Feedback for user actions -->
        <table id="userTable">
          <thead>
            <tr>
              <th data-i18n="userManagement.table.headerUser">User</th>
              <th data-i18n="userManagement.table.headerStatus">Status</th>
              <th data-i18n="userManagement.table.headerLastLogin">Last Login</th>
              <th data-i18n="userManagement.table.headerCreated">Created</th>
              <th data-i18n="userManagement.table.headerActions">Actions</th>
            </tr>
          </thead>
          <tbody id="userTableBody">
            <!-- User rows will be populated here -->
            <tr>
              <td colspan="5" style="text-align: center; color: #8e9297" data-i18n="userManagement.loading">
                Loading...
              </td>
            </tr>
          </tbody>
        </table>
        <button id="pruneButton" class="btn-prune" data-i18n="userManagement.pruneButton">
          Prune Inactive Accounts
        </button>
      </div>

      <!-- Current Config Tab Content -->
      <div id="tab-current-config" class="admin-tab-content">
        <h3 data-i18n="currentConfig.title">Current Server Configuration</h3>
        <div id="currentConfigFeedback" style="margin-bottom: 15px"></div>
        <div id="currentConfigDisplay">
          <div class="config-loading" data-i18n="currentConfig.loading">Loading configuration...</div>
        </div>
      </div>

    <!-- Load the external script -->
    <script src="admin-logic.js" defer></script>
    </div>
    </body>
</html>
